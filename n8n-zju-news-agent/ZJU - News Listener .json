{
  "name": "ZJU - News Listener",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "zju-edu-news",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        0,
        0
      ],
      "id": "35a91547-55b9-4f97-b39c-9b494ac104c9",
      "name": "ZJU - News Listener",
      "webhookId": ""
    },
    {
      "parameters": {
        "jsCode": "// 1. æ›´å®‰å…¨åœ°è·å– Webhook æ•°æ®\n// åœ¨ \"Run Once for All Items\" æ¨¡å¼ä¸‹ï¼Œ$input.first().json æ˜¯è·å–ç¬¬ä¸€ä¸ªè¾“å…¥é¡¹çš„æ ‡å‡†å†™æ³•\nconst inputItem = $input.first();\nconst body = inputItem ? inputItem.json.body : {};\n\n// 2. è°ƒè¯•æ—¥å¿— (æŒ‰ F12 æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°å¯ä»¥çœ‹åˆ°)\nconsole.log(\"ğŸ”¥ [Code Debug] æ”¶åˆ°çš„å®Œæ•´ Body:\", body);\n\n// 3. æ£€æŸ¥ items æ˜¯å¦å­˜åœ¨\nif (!body || !body.items || !Array.isArray(body.items)) {\n  console.log(\"âŒ [Code Debug] æ²¡æœ‰æ‰¾åˆ° items æ•°ç»„ï¼Œæˆ–æ ¼å¼é”™è¯¯\");\n  return [];\n}\n\nconsole.log(`âœ… [Code Debug] æ‰¾åˆ° ${body.items.length} æ¡æ–°é—»ï¼Œå‡†å¤‡æ‹†åˆ†...`);\n\n// 4. æ‹†åˆ†æ•°ç»„å¹¶è¾“å‡º\nreturn body.items.map(news => {\n  // æ‰“å°æ¯ä¸€æ¡ï¼Œæ£€æŸ¥å­—æ®µåæ˜¯å¦æ­£ç¡® (æ¯”å¦‚ title vs Title)\n  // console.log(\"æ–°é—»æ¡ç›®:\", news); \n  \n  return {\n    json: {\n      // ç¡®ä¿è¿™é‡Œçš„ news.xxx å’Œä½  Tampermonkey è„šæœ¬é‡Œçš„ä¸€æ¨¡ä¸€æ ·\n      title: news.title || \"é»˜è®¤æ ‡é¢˜(æŠ“å–å¤±è´¥)\", \n      link: news.link,\n      date: news.date,\n      fetchTime: new Date().toISOString()\n    }\n  };\n});"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        208,
        0
      ],
      "id": "8f1bcd70-dd41-49ee-8ccf-c0cd81a6b253",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "resource": "databasePage",
        "databaseId": {
          "__rl": true,
          "value": "YOUR_DATABASE_ID",
          "mode": "id"
        },
        "propertiesUi": {
          "propertyValues": [
            {
              "key": "Title|title",
              "title": "={{ $json.title }}"
            },
            {
              "key": "URL|url",
              "ignoreIfEmpty": true,
              "urlValue": "={{ $json.link }}"
            },
            {
              "key": "PubDate|rich_text",
              "textContent": "={{ $json.date }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [
        416,
        0
      ],
      "id": "05c778e5-2604-4975-a892-78a779985d4b",
      "name": "Create a database page",
      "retryOnFail": true,
      "credentials": {
        "notionApi": {
          "id": "KtMV3zHmgeoRcCBI",
          "name": "Notion account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "ZJU - News Listener": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Create a database page",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    },
  "versionId": "v1-clean",
  "tags": []
}